<!DOCTYPE html>
<html>
  <head>
    <meta charset=utf-8>
    <title>あきーにょcafe</title>

    <script src="http://jashkenas.github.com/coffee-script/extras/coffee-script.js" type="text/javascript" charset="utf-8"></script>
    <script type="text/coffeescript">
      block = [ [ 1, 1 ], [ 0, 1 ], [ 0, 1 ] ]
      [posx, posy] = [0, 0]
      map = []
      [mapWidth, mapHeight] = [10, 20]

      ctx = ->
        elmTarget = document.getElementById("target")
        elmTarget.getContext("2d")

      window.load = ->
        y = 0
        while y < mapHeight
          map[y] = []
          x = 0
          while x < mapWidth
            map[y][x] = 0
            x++
          y++

        setInterval paint, 200

      paintMatrix = (matrix, offsetx, offsety, color) ->
        ctx().fillStyle = color;
        y = 0
        while y < matrix.length
          x = 0
          while x < matrix[y].length
            ctx().fillRect((x + offsetx) * 20, (y + offsety) * 20, 20, 20) if matrix[y][x]
            x++
          y++

      paint = ->
        ctx().clearRect 0, 0, 200, 400
        paintMatrix(map, 0, 0, "rgb(128, 128, 128)")
        paintMatrix(block, posx, posy, "rgb(255, 0, 0)")
        posy = posy + 1

    </script>
  </head>
  <body onload="load()">
    <canvas id="target" style="border: 5px solid gray" width="200" height="400"></canvas>
  </body>
</html>
